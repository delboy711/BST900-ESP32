EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 1
Title "BST900-ESP32"
Date "2021-11-02"
Rev "0.3"
Comp ""
Comment1 "TTGO T-Display Control Board for BST900 Boost Converter"
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L Connector:Conn_01x08_Female J1
U 1 1 616A049A
P 1475 1325
F 0 "J1" H 1525 1825 50  0000 C CNN
F 1 "BST900 Left Hand Socket" H 1400 1950 50  0000 C CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x08_P2.54mm_Vertical" H 1475 1325 50  0001 C CNN
F 3 "~" H 1475 1325 50  0001 C CNN
	1    1475 1325
	-1   0    0    -1  
$EndComp
Wire Wire Line
	1675 1125 2175 1125
Wire Wire Line
	1675 1225 2175 1225
Wire Wire Line
	1675 1325 2175 1325
Wire Wire Line
	1675 1425 2175 1425
Wire Wire Line
	1675 1525 2175 1525
Wire Wire Line
	1675 1625 2175 1625
Wire Wire Line
	1675 1725 2175 1725
Text GLabel 2175 1725 2    50   Input ~ 0
Fan_PWM
Text GLabel 2175 1625 2    50   Input ~ 0
CV_CC
Text GLabel 2175 1525 2    50   Input ~ 0
Enable
Text GLabel 2175 1425 2    50   Input ~ 0
Vout_PWM
Text GLabel 2175 1325 2    50   Input ~ 0
Iout_PWM
Text GLabel 2175 1225 2    50   Input ~ 0
Vin_sense
Text GLabel 2175 1125 2    50   Input ~ 0
Vout_sense
Text GLabel 3550 1025 2    50   Input ~ 0
Iout_sense
$Comp
L Connector:Conn_01x08_Female J6
U 1 1 616A4445
P 9925 1500
F 0 "J6" H 9825 900 50  0000 C CNN
F 1 "BST900 Right Hand Socket" H 9850 2125 50  0000 C CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x08_P2.54mm_Vertical" H 9925 1500 50  0001 C CNN
F 3 "~" H 9925 1500 50  0001 C CNN
	1    9925 1500
	1    0    0    -1  
$EndComp
Text GLabel 8300 1850 1    50   Input ~ 0
+5V
Text GLabel 9225 1200 1    50   Input ~ 0
GND
NoConn ~ 9725 1900
NoConn ~ 9725 1800
Wire Wire Line
	9725 1300 9725 1200
Connection ~ 9725 1200
Wire Wire Line
	9725 1500 9725 1400
Wire Wire Line
	9725 1700 9725 1600
Wire Wire Line
	8625 1200 9725 1200
$Comp
L power:GND #PWR022
U 1 1 616A99D8
P 8625 1200
F 0 "#PWR022" H 8625 950 50  0001 C CNN
F 1 "GND" H 8630 1027 50  0000 C CNN
F 2 "" H 8625 1200 50  0001 C CNN
F 3 "" H 8625 1200 50  0001 C CNN
	1    8625 1200
	1    0    0    -1  
$EndComp
Wire Wire Line
	8000 1850 8500 1850
$Comp
L power:VDD #PWR020
U 1 1 616AA3F1
P 8000 1850
F 0 "#PWR020" H 8000 1700 50  0001 C CNN
F 1 "VDD" H 8015 2023 50  0000 C CNN
F 2 "" H 8000 1850 50  0001 C CNN
F 3 "" H 8000 1850 50  0001 C CNN
	1    8000 1850
	1    0    0    -1  
$EndComp
$Comp
L device:CP C2
U 1 1 616AAB6F
P 8000 2000
F 0 "C2" H 8118 2046 50  0000 L CNN
F 1 "470uF 10V" H 7525 1875 50  0000 L CNN
F 2 "Capacitor_SMD:CP_Elec_6.3x7.7" H 8038 1850 50  0001 C CNN
F 3 "~" H 8000 2000 50  0001 C CNN
F 4 "C335982" H 8000 2000 50  0001 C CNN "LCSC"
	1    8000 2000
	1    0    0    -1  
$EndComp
Connection ~ 8000 1850
$Comp
L power:GND #PWR021
U 1 1 616ABA99
P 8000 2150
F 0 "#PWR021" H 8000 1900 50  0001 C CNN
F 1 "GND" H 8005 1977 50  0000 C CNN
F 2 "" H 8000 2150 50  0001 C CNN
F 3 "" H 8000 2150 50  0001 C CNN
	1    8000 2150
	1    0    0    -1  
$EndComp
$Comp
L device:C C3
U 1 1 616AC4B8
P 8500 2000
F 0 "C3" H 8525 2100 50  0000 L CNN
F 1 "100nF" H 8525 1850 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric" H 8538 1850 50  0001 C CNN
F 3 "~" H 8500 2000 50  0001 C CNN
	1    8500 2000
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR023
U 1 1 616ACC65
P 8500 2150
F 0 "#PWR023" H 8500 1900 50  0001 C CNN
F 1 "GND" H 8505 1977 50  0000 C CNN
F 2 "" H 8500 2150 50  0001 C CNN
F 3 "" H 8500 2150 50  0001 C CNN
	1    8500 2150
	1    0    0    -1  
$EndComp
Text GLabel 1300 2400 0    50   Input ~ 0
CV_CC
$Comp
L device:R R1
U 1 1 616ADBCF
P 1450 2400
F 0 "R1" V 1243 2400 50  0000 C CNN
F 1 "3K3" V 1334 2400 50  0000 C CNN
F 2 "Resistor_SMD:R_0805_2012Metric" V 1380 2400 50  0001 C CNN
F 3 "~" H 1450 2400 50  0001 C CNN
	1    1450 2400
	0    1    1    0   
$EndComp
$Comp
L device:LED D1
U 1 1 616AEC63
P 2150 2550
F 0 "D1" V 2189 2432 50  0000 R CNN
F 1 "BLUE LED" V 2098 2432 50  0000 R CNN
F 2 "Diode_SMD:D_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 2150 2550 50  0001 C CNN
F 3 "~" H 2150 2550 50  0001 C CNN
	1    2150 2550
	0    -1   -1   0   
$EndComp
$Comp
L power:GND #PWR03
U 1 1 616AF8DB
P 2150 2700
F 0 "#PWR03" H 2150 2450 50  0001 C CNN
F 1 "GND" H 2155 2527 50  0000 C CNN
F 2 "" H 2150 2700 50  0001 C CNN
F 3 "" H 2150 2700 50  0001 C CNN
	1    2150 2700
	1    0    0    -1  
$EndComp
Text Notes 2825 3325 2    50   ~ 0
LED should not be Red. Idea is to use \nforward voltage drop across LED to create a 3.3V safe\ninput for ESP 32.  CV_CC pin has 5V on it.\nRed LEDs have too small a forward voltage drop.
Text GLabel 2150 2400 2    50   Input ~ 0
GPIO_27
$Comp
L Connector_Generic:Conn_02x12_Counter_Clockwise U2
U 1 1 616BC8B6
P 5550 1750
F 0 "U2" H 5625 2425 50  0000 R CNN
F 1 "TTGO T-DISPLAY" H 5900 975 50  0000 R CNN
F 2 "derek:MODULE_TTGO_T-DISPLAY" H 5550 1750 50  0001 C CNN
F 3 "~" H 5550 1750 50  0001 C CNN
	1    5550 1750
	1    0    0    -1  
$EndComp
Wire Wire Line
	5850 2350 6400 2350
$Comp
L power:VDD #PWR018
U 1 1 616C8B46
P 6400 2350
F 0 "#PWR018" H 6400 2200 50  0001 C CNN
F 1 "VDD" H 6415 2523 50  0000 C CNN
F 2 "" H 6400 2350 50  0001 C CNN
F 3 "" H 6400 2350 50  0001 C CNN
	1    6400 2350
	1    0    0    -1  
$EndComp
Text GLabel 6400 2350 3    50   Input ~ 0
+5V
Wire Wire Line
	5350 1350 5350 1250
Wire Wire Line
	5350 1250 4600 1250
Connection ~ 5350 1250
$Comp
L power:GND #PWR09
U 1 1 616CA33B
P 4600 1250
F 0 "#PWR09" H 4600 1000 50  0001 C CNN
F 1 "GND" H 4450 1225 50  0000 C CNN
F 2 "" H 4600 1250 50  0001 C CNN
F 3 "" H 4600 1250 50  0001 C CNN
	1    4600 1250
	1    0    0    -1  
$EndComp
Wire Wire Line
	5350 2250 5350 2150
Wire Wire Line
	5350 2150 4600 2150
Connection ~ 5350 2150
$Comp
L power:GND #PWR010
U 1 1 616CB60C
P 4600 2150
F 0 "#PWR010" H 4600 1900 50  0001 C CNN
F 1 "GND" H 4605 1977 50  0000 C CNN
F 2 "" H 4600 2150 50  0001 C CNN
F 3 "" H 4600 2150 50  0001 C CNN
	1    4600 2150
	1    0    0    -1  
$EndComp
Wire Wire Line
	5850 2250 6225 2250
Wire Wire Line
	6225 2250 6225 2100
Wire Wire Line
	6225 2100 6600 2100
$Comp
L power:GND #PWR019
U 1 1 616CD061
P 6600 2100
F 0 "#PWR019" H 6600 1850 50  0001 C CNN
F 1 "GND" H 6605 1927 50  0000 C CNN
F 2 "" H 6600 2100 50  0001 C CNN
F 3 "" H 6600 2100 50  0001 C CNN
	1    6600 2100
	1    0    0    -1  
$EndComp
Wire Wire Line
	5850 1250 6375 1250
$Comp
L power:VCC #PWR017
U 1 1 616CE068
P 6375 1250
F 0 "#PWR017" H 6375 1100 50  0001 C CNN
F 1 "VCC" H 6390 1423 50  0000 C CNN
F 2 "" H 6375 1250 50  0001 C CNN
F 3 "" H 6375 1250 50  0001 C CNN
	1    6375 1250
	1    0    0    -1  
$EndComp
Wire Wire Line
	5350 2350 5100 2350
$Comp
L power:VCC #PWR013
U 1 1 616CECC1
P 5100 2350
F 0 "#PWR013" H 5100 2200 50  0001 C CNN
F 1 "VCC" H 5100 2275 50  0000 C CNN
F 2 "" H 5100 2350 50  0001 C CNN
F 3 "" H 5100 2350 50  0001 C CNN
	1    5100 2350
	1    0    0    -1  
$EndComp
Text GLabel 6375 1250 2    50   Input ~ 0
+3.3V
$Comp
L Connector:Conn_01x02_Male J2
U 1 1 616CF9FE
P 2100 4375
F 0 "J2" H 2208 4556 50  0000 C CNN
F 1 "Thermistor" H 2208 4465 50  0000 C CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x02_P2.54mm_Horizontal" H 2100 4375 50  0001 C CNN
F 3 "~" H 2100 4375 50  0001 C CNN
	1    2100 4375
	1    0    0    -1  
$EndComp
$Comp
L device:R R2
U 1 1 616D0250
P 2675 4200
F 0 "R2" H 2745 4246 50  0000 L CNN
F 1 "10K" H 2745 4155 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric" V 2605 4200 50  0001 C CNN
F 3 "~" H 2675 4200 50  0001 C CNN
	1    2675 4200
	1    0    0    -1  
$EndComp
Wire Wire Line
	2300 4375 2675 4375
Wire Wire Line
	2675 4375 2675 4350
$Comp
L power:VCC #PWR07
U 1 1 616D0FE0
P 2675 4050
F 0 "#PWR07" H 2675 3900 50  0001 C CNN
F 1 "VCC" H 2675 4250 50  0000 C CNN
F 2 "" H 2675 4050 50  0001 C CNN
F 3 "" H 2675 4050 50  0001 C CNN
	1    2675 4050
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR04
U 1 1 616D1DCE
P 2300 4475
F 0 "#PWR04" H 2300 4225 50  0001 C CNN
F 1 "GND" H 2305 4302 50  0000 C CNN
F 2 "" H 2300 4475 50  0001 C CNN
F 3 "" H 2300 4475 50  0001 C CNN
	1    2300 4475
	1    0    0    -1  
$EndComp
Text Notes 1900 4500 2    50   ~ 0
Thermistor is 10K at 25 degC\nBeta Coeff = 3950
Text GLabel 2675 4375 2    50   Input ~ 0
ANALOGUE_3
Wire Wire Line
	5850 1450 7050 1450
Wire Wire Line
	7050 1450 7050 1350
Text Label 6075 1450 2    50   ~ 0
ADC1
Text GLabel 7050 1350 1    50   Input ~ 0
Vin_sense
Wire Wire Line
	5850 1550 7250 1550
Wire Wire Line
	7250 1550 7250 1350
Text Label 6075 1550 2    50   ~ 0
ADC2
Text GLabel 7250 1350 1    50   Input ~ 0
Iout_sense
Wire Wire Line
	5850 1650 7450 1650
Wire Wire Line
	7450 1650 7450 1350
Text GLabel 7450 1350 1    50   Input ~ 0
Vout_sense
Text Label 6050 1650 2    50   ~ 0
ADC3
Wire Wire Line
	5850 1850 6350 1850
$Comp
L power:VCC #PWR016
U 1 1 616D7094
P 7575 1750
F 0 "#PWR016" H 7575 1600 50  0001 C CNN
F 1 "VCC" H 7675 1775 50  0000 C CNN
F 2 "" H 7575 1750 50  0001 C CNN
F 3 "" H 7575 1750 50  0001 C CNN
	1    7575 1750
	1    0    0    -1  
$EndComp
Text Label 6200 1850 2    50   ~ 0
GPIO_33
Wire Wire Line
	5350 1850 4600 1850
Text GLabel 4600 1850 0    50   Input ~ 0
Vout_PWM
Text Label 5150 1850 2    50   ~ 0
GPIO_15
Wire Wire Line
	5350 1950 4600 1950
Text GLabel 4600 1950 0    50   Input ~ 0
Iout_PWM
Text Label 5150 1950 2    50   ~ 0
GPIO_13
Wire Wire Line
	4600 2050 5350 2050
Text GLabel 4600 2050 0    50   Input ~ 0
Enable
Text Label 5150 2050 2    50   ~ 0
GPIO_12
Wire Wire Line
	5350 1750 4600 1750
Text GLabel 4600 1750 0    50   Input ~ 0
Fan_PWM
Text Label 5150 1750 2    50   ~ 0
GPIO_2
Wire Wire Line
	5850 2150 6175 2150
Wire Wire Line
	6175 2150 6175 2050
Wire Wire Line
	6175 2050 6900 2050
Text Label 6750 2050 2    50   ~ 0
GPIO_27
Wire Wire Line
	5350 1450 4950 1450
Text GLabel 4950 1450 0    50   Input ~ 0
SDA
Text Label 5275 1450 2    50   ~ 0
GPIO_21
Wire Wire Line
	5350 1550 4600 1550
Text GLabel 4600 1550 0    50   Input ~ 0
SCL
Text Label 5275 1550 2    50   ~ 0
GPIO_22
Text Notes 7525 800  2    50   ~ 0
Only needed for\nESP32 ADC
$Comp
L device:C C4
U 1 1 616E398B
P 10150 2800
F 0 "C4" H 10175 2900 50  0000 L CNN
F 1 "100nF" H 9825 2875 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric" H 10188 2650 50  0001 C CNN
F 3 "~" H 10150 2800 50  0001 C CNN
	1    10150 2800
	1    0    0    -1  
$EndComp
$Comp
L device:C C5
U 1 1 616E3FBC
P 10475 2800
F 0 "C5" H 10500 2900 50  0000 L CNN
F 1 "100nF" H 10225 2725 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric" H 10513 2650 50  0001 C CNN
F 3 "~" H 10475 2800 50  0001 C CNN
	1    10475 2800
	1    0    0    -1  
$EndComp
$Comp
L device:C C6
U 1 1 616E472F
P 10800 2800
F 0 "C6" H 10825 2900 50  0000 L CNN
F 1 "100nF" H 10900 2700 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric" H 10838 2650 50  0001 C CNN
F 3 "~" H 10800 2800 50  0001 C CNN
	1    10800 2800
	1    0    0    -1  
$EndComp
Wire Wire Line
	10150 2950 10475 2950
Wire Wire Line
	10475 2950 10800 2950
Connection ~ 10475 2950
$Comp
L power:GND #PWR024
U 1 1 616E73C9
P 10475 2950
F 0 "#PWR024" H 10475 2700 50  0001 C CNN
F 1 "GND" H 10480 2777 50  0000 C CNN
F 2 "" H 10475 2950 50  0001 C CNN
F 3 "" H 10475 2950 50  0001 C CNN
	1    10475 2950
	1    0    0    -1  
$EndComp
Text GLabel 10150 2650 1    50   Input ~ 0
Vin_sense
Text GLabel 10475 2650 1    50   Input ~ 0
Iout_sense
Text GLabel 10800 2650 1    50   Input ~ 0
Vout_sense
$Comp
L Connector:Conn_01x10_Female J4
U 1 1 616E9284
P 4375 3500
F 0 "J4" V 4448 3430 50  0000 C CNN
F 1 "ADS1115" V 4539 3430 50  0000 C CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x10_P2.54mm_Vertical" H 4375 3500 50  0001 C CNN
F 3 "~" H 4375 3500 50  0001 C CNN
	1    4375 3500
	0    1    1    0   
$EndComp
$Comp
L power:VCC #PWR012
U 1 1 616EB44A
P 4775 3300
F 0 "#PWR012" H 4775 3150 50  0001 C CNN
F 1 "VCC" H 4775 3500 50  0000 C CNN
F 2 "" H 4775 3300 50  0001 C CNN
F 3 "" H 4775 3300 50  0001 C CNN
	1    4775 3300
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR011
U 1 1 616EBF8C
P 4775 2800
F 0 "#PWR011" H 4775 2550 50  0001 C CNN
F 1 "GND" H 4780 2627 50  0000 C CNN
F 2 "" H 4775 2800 50  0001 C CNN
F 3 "" H 4775 2800 50  0001 C CNN
	1    4775 2800
	1    0    0    -1  
$EndComp
Wire Wire Line
	4675 3300 4675 2700
Wire Wire Line
	4675 2700 4775 2700
Wire Wire Line
	4775 2700 4775 2800
Text GLabel 4575 3300 1    50   Input ~ 0
SCL
Text GLabel 4475 3300 1    50   Input ~ 0
SDA
NoConn ~ 4375 3300
NoConn ~ 4275 3300
Text GLabel 4175 3300 1    50   Input ~ 0
Vin_sense
Text GLabel 4075 3300 1    50   Input ~ 0
Iout_sense
Text GLabel 3975 3300 1    50   Input ~ 0
Vout_sense
Text Notes 2825 2625 0    50   ~ 0
LED Lights in\nConstant Voltage mode
Text GLabel 3875 3300 1    50   Input ~ 0
ANALOGUE_3
Wire Wire Line
	5850 2050 6100 2050
Wire Wire Line
	6100 2050 6100 1950
Wire Wire Line
	6100 1950 6900 1950
Wire Wire Line
	5850 1950 5950 1950
Wire Wire Line
	5950 1950 5950 1900
Wire Wire Line
	5950 1900 6775 1900
Wire Wire Line
	6775 1900 6775 1825
Wire Wire Line
	6775 1825 6900 1825
Text GLabel 1500 5650 0    50   Input ~ 0
RS485_RX
Text GLabel 4600 1650 0    50   Input ~ 0
RX485_ENA
Wire Wire Line
	5350 1650 4600 1650
Wire Wire Line
	1600 2400 2150 2400
$Comp
L BST900-ESP32:SN65HVD75DR U1
U 1 1 6180FCCA
P 1800 5500
F 0 "U1" H 1900 5575 50  0000 C CNN
F 1 "SIT3485ESA" H 1900 5484 50  0000 C CNN
F 2 "Package_SO:SOIC-8_3.9x4.9mm_P1.27mm" H 1800 5500 50  0001 C CNN
F 3 "https://datasheet.lcsc.com/lcsc/1810251527_SIT-SIT3485ESA_C313015.pdf" H 1800 5500 50  0001 C CNN
F 4 "C313015" H 1800 5500 50  0001 C CNN "LCSC"
	1    1800 5500
	1    0    0    -1  
$EndComp
Wire Wire Line
	1500 5750 1500 5850
$Comp
L power:GND #PWR06
U 1 1 618120DE
P 2300 5950
F 0 "#PWR06" H 2300 5700 50  0001 C CNN
F 1 "GND" H 2305 5777 50  0000 C CNN
F 2 "" H 2300 5950 50  0001 C CNN
F 3 "" H 2300 5950 50  0001 C CNN
	1    2300 5950
	1    0    0    -1  
$EndComp
$Comp
L power:VCC #PWR05
U 1 1 618128D7
P 2300 5650
F 0 "#PWR05" H 2300 5500 50  0001 C CNN
F 1 "VCC" H 2300 5850 50  0000 C CNN
F 2 "" H 2300 5650 50  0001 C CNN
F 3 "" H 2300 5650 50  0001 C CNN
	1    2300 5650
	1    0    0    -1  
$EndComp
$Comp
L device:R R4
U 1 1 6181342E
P 2975 5475
F 0 "R4" H 3045 5521 50  0000 L CNN
F 1 "120R" H 3045 5430 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric" V 2905 5475 50  0001 C CNN
F 3 "~" H 2975 5475 50  0001 C CNN
	1    2975 5475
	1    0    0    -1  
$EndComp
Wire Wire Line
	2300 5750 2500 5750
Wire Wire Line
	2500 5750 2500 5300
Wire Wire Line
	2500 5300 2975 5300
Wire Wire Line
	2975 5300 2975 5325
$Comp
L Jumper:SolderJumper_2_Open JP1
U 1 1 61816313
P 2975 5775
F 0 "JP1" V 2929 5843 50  0000 L CNN
F 1 "Bus Termination" V 3200 5575 50  0000 L CNN
F 2 "Jumper:SolderJumper-2_P1.3mm_Open_RoundedPad1.0x1.5mm" H 2975 5775 50  0001 C CNN
F 3 "~" H 2975 5775 50  0001 C CNN
	1    2975 5775
	0    1    1    0   
$EndComp
Wire Wire Line
	2300 5850 2750 5850
Wire Wire Line
	2750 5850 2750 5925
Wire Wire Line
	2750 5925 2975 5925
Wire Wire Line
	3900 5525 3475 5525
Wire Wire Line
	3475 5525 3475 5300
Wire Wire Line
	3475 5300 2975 5300
Connection ~ 2975 5300
Wire Wire Line
	2975 5925 3475 5925
Wire Wire Line
	3475 5925 3475 5625
Wire Wire Line
	3475 5625 3900 5625
Connection ~ 2975 5925
Text GLabel 6900 1825 2    50   Input ~ 0
RS485_RX
Text GLabel 6900 1950 2    50   Input ~ 0
RS485_TX
Text GLabel 1500 5950 0    50   Input ~ 0
RS485_TX
Text GLabel 1500 5850 0    50   Input ~ 0
RX485_ENA
Text Label 6075 1350 2    50   ~ 0
ADC0
Wire Wire Line
	5850 1350 6800 1350
Text GLabel 6800 1350 1    50   Input ~ 0
ANALOGUE_3
$Comp
L device:C C1
U 1 1 6182F480
P 1775 6400
F 0 "C1" H 1800 6500 50  0000 L CNN
F 1 "100nF" H 1450 6475 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric" H 1813 6250 50  0001 C CNN
F 3 "~" H 1775 6400 50  0001 C CNN
	1    1775 6400
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR02
U 1 1 618305A2
P 1775 6550
F 0 "#PWR02" H 1775 6300 50  0001 C CNN
F 1 "GND" H 1780 6377 50  0000 C CNN
F 2 "" H 1775 6550 50  0001 C CNN
F 3 "" H 1775 6550 50  0001 C CNN
	1    1775 6550
	1    0    0    -1  
$EndComp
$Comp
L power:VCC #PWR01
U 1 1 6183110D
P 1775 6250
F 0 "#PWR01" H 1775 6100 50  0001 C CNN
F 1 "VCC" H 1775 6450 50  0000 C CNN
F 2 "" H 1775 6250 50  0001 C CNN
F 3 "" H 1775 6250 50  0001 C CNN
	1    1775 6250
	1    0    0    -1  
$EndComp
$Comp
L Connector:Conn_01x10_Female J5
U 1 1 617E9866
P 5650 3500
F 0 "J5" V 5723 3430 50  0000 C CNN
F 1 "ADS1115" V 5814 3430 50  0000 C CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x10_P2.54mm_Vertical" H 5650 3500 50  0001 C CNN
F 3 "~" H 5650 3500 50  0001 C CNN
	1    5650 3500
	0    1    1    0   
$EndComp
$Comp
L power:VCC #PWR015
U 1 1 617E9C14
P 6050 3300
F 0 "#PWR015" H 6050 3150 50  0001 C CNN
F 1 "VCC" H 6050 3500 50  0000 C CNN
F 2 "" H 6050 3300 50  0001 C CNN
F 3 "" H 6050 3300 50  0001 C CNN
	1    6050 3300
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR014
U 1 1 617E9C1E
P 6050 2800
F 0 "#PWR014" H 6050 2550 50  0001 C CNN
F 1 "GND" H 6055 2627 50  0000 C CNN
F 2 "" H 6050 2800 50  0001 C CNN
F 3 "" H 6050 2800 50  0001 C CNN
	1    6050 2800
	1    0    0    -1  
$EndComp
Wire Wire Line
	5950 3300 5950 2700
Wire Wire Line
	5950 2700 6050 2700
Wire Wire Line
	6050 2700 6050 2800
Text GLabel 5750 3300 1    50   Input ~ 0
SCL
Text GLabel 5850 3300 1    50   Input ~ 0
SDA
NoConn ~ 5650 3300
NoConn ~ 5550 3300
Text GLabel 5450 3300 1    50   Input ~ 0
Vin_sense
Text GLabel 5350 3300 1    50   Input ~ 0
Iout_sense
Text GLabel 5250 3300 1    50   Input ~ 0
Vout_sense
Text GLabel 5150 3300 1    50   Input ~ 0
ANALOGUE_3
Text Notes 3875 3900 0    50   ~ 0
Blue ADS1115 Module
Text Notes 5100 3900 0    50   ~ 0
Purple ADS1115 Module\n(SDA/SCL reversed)
Text Notes 4875 3825 0    50   ~ 0
OR
$Comp
L device:R R3
U 1 1 617ED810
P 3400 1025
F 0 "R3" V 3193 1025 50  0000 C CNN
F 1 "10K" V 3284 1025 50  0000 C CNN
F 2 "Resistor_SMD:R_0805_2012Metric" V 3330 1025 50  0001 C CNN
F 3 "~" H 3400 1025 50  0001 C CNN
	1    3400 1025
	0    1    1    0   
$EndComp
Wire Wire Line
	3550 1025 3550 1200
$Comp
L device:R R5
U 1 1 617F2C1B
P 3550 1350
F 0 "R5" H 3620 1396 50  0000 L CNN
F 1 "33K" H 3620 1305 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric" V 3480 1350 50  0001 C CNN
F 3 "~" H 3550 1350 50  0001 C CNN
	1    3550 1350
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR08
U 1 1 617F3C37
P 3550 1500
F 0 "#PWR08" H 3550 1250 50  0001 C CNN
F 1 "GND" H 3555 1327 50  0000 C CNN
F 2 "" H 3550 1500 50  0001 C CNN
F 3 "" H 3550 1500 50  0001 C CNN
	1    3550 1500
	1    0    0    -1  
$EndComp
Text Notes 3600 825  0    50   ~ 0
Allows 2.048V range of ADS1115 to be used\n without overflowing at 15A
Text GLabel 6900 2050 2    50   Input ~ 0
GPIO_27
$Comp
L Jumper:SolderJumper_3_Open JP2
U 1 1 6183CBD5
P 8950 1850
F 0 "JP2" V 8904 1918 50  0000 L CNN
F 1 "Power Select" V 8995 1918 50  0000 L CNN
F 2 "Jumper:SolderJumper-3_P1.3mm_Open_RoundedPad1.0x1.5mm" H 8950 1850 50  0001 C CNN
F 3 "~" H 8950 1850 50  0001 C CNN
	1    8950 1850
	0    1    1    0   
$EndComp
Wire Wire Line
	9725 1600 8950 1600
Wire Wire Line
	8950 1600 8950 1650
Connection ~ 9725 1600
Wire Wire Line
	8800 1850 8500 1850
Connection ~ 8500 1850
$Comp
L power:VCC #PWR025
U 1 1 61850831
P 7050 3100
F 0 "#PWR025" H 7050 2950 50  0001 C CNN
F 1 "VCC" H 7050 3300 50  0000 C CNN
F 2 "" H 7050 3100 50  0001 C CNN
F 3 "" H 7050 3100 50  0001 C CNN
	1    7050 3100
	1    0    0    -1  
$EndComp
$Comp
L device:R R6
U 1 1 618510DD
P 7050 3325
F 0 "R6" H 7120 3371 50  0000 L CNN
F 1 "2K2" H 7120 3280 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric" V 6980 3325 50  0001 C CNN
F 3 "~" H 7050 3325 50  0001 C CNN
	1    7050 3325
	1    0    0    -1  
$EndComp
$Comp
L device:R R7
U 1 1 618520B2
P 7325 3325
F 0 "R7" H 7395 3371 50  0000 L CNN
F 1 "2K2" H 7395 3280 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric" V 7255 3325 50  0001 C CNN
F 3 "~" H 7325 3325 50  0001 C CNN
	1    7325 3325
	1    0    0    -1  
$EndComp
Wire Wire Line
	7050 3100 7050 3175
Wire Wire Line
	7050 3175 7325 3175
Connection ~ 7050 3175
Text GLabel 7325 3475 3    50   Input ~ 0
SDA
Text GLabel 7050 3475 3    50   Input ~ 0
SCL
Text Notes 6425 3950 0    50   ~ 0
Pull up resistors on I2c\nNot normally needed since there\nare resistors in the ADS1115 module
$Comp
L conn:Conn_01x04_Male J3
U 1 1 6185FE41
P 4100 5625
F 0 "J3" H 4072 5507 50  0000 R CNN
F 1 "RS485" H 4072 5598 50  0000 R CNN
F 2 "Connector_JST:JST_PH_S4B-PH-K_1x04_P2.00mm_Horizontal" H 4100 5625 50  0001 C CNN
F 3 "~" H 4100 5625 50  0001 C CNN
	1    4100 5625
	-1   0    0    1   
$EndComp
Text GLabel 3900 5925 3    50   Input ~ 0
EXT_5V
Text GLabel 8950 2050 3    50   Input ~ 0
EXT_5V
$Comp
L device:R R9
U 1 1 61871D57
P 7425 1750
F 0 "R9" V 7218 1750 50  0000 C CNN
F 1 "10K" V 7309 1750 50  0000 C CNN
F 2 "Resistor_SMD:R_0805_2012Metric" V 7355 1750 50  0001 C CNN
F 3 "~" H 7425 1750 50  0001 C CNN
	1    7425 1750
	0    1    1    0   
$EndComp
Wire Wire Line
	7275 1750 6350 1750
Wire Wire Line
	6350 1750 6350 1850
$Comp
L Switch:SW_Push SW1
U 1 1 618784B3
P 4300 4625
F 0 "SW1" H 4300 4910 50  0000 C CNN
F 1 "SW_Push" H 4300 4819 50  0000 C CNN
F 2 "Button_Switch_SMD:SW_Push_1P1T_NO_6x6mm_H9.5mm" H 4300 4825 50  0001 C CNN
F 3 "https://datasheet.lcsc.com/lcsc/1912111437_SHOU-HAN-TS666TP_C412376.pdf" H 4300 4825 50  0001 C CNN
F 4 "C412376" H 4300 4625 50  0001 C CNN "LCSC"
	1    4300 4625
	1    0    0    -1  
$EndComp
Text Label 6175 1750 2    50   ~ 0
GPIO_32
Wire Wire Line
	5850 1750 6175 1750
Text Label 3900 4625 2    50   ~ 0
GPIO_32
Wire Wire Line
	4500 4625 4750 4625
Text Notes 3875 4800 0    50   ~ 0
Not currently used
Wire Wire Line
	3775 5250 3900 5250
Wire Wire Line
	3900 5250 3900 5425
Wire Wire Line
	3900 5725 3900 5925
Wire Wire Line
	1675 1025 3250 1025
$Comp
L power:GND #PWR0102
U 1 1 61864321
P 3775 5250
F 0 "#PWR0102" H 3775 5000 50  0001 C CNN
F 1 "GND" H 3780 5077 50  0000 C CNN
F 2 "" H 3775 5250 50  0001 C CNN
F 3 "" H 3775 5250 50  0001 C CNN
	1    3775 5250
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR0101
U 1 1 61824970
P 4750 4625
F 0 "#PWR0101" H 4750 4375 50  0001 C CNN
F 1 "GND" H 4755 4452 50  0000 C CNN
F 2 "" H 4750 4625 50  0001 C CNN
F 3 "" H 4750 4625 50  0001 C CNN
	1    4750 4625
	1    0    0    -1  
$EndComp
Wire Wire Line
	3900 4625 4100 4625
$Comp
L conn:Conn_01x04_Male J7
U 1 1 618638AA
P 7100 4850
F 0 "J7" H 7072 4732 50  0000 R CNN
F 1 "I2C" H 7072 4823 50  0000 R CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x04_P2.54mm_Vertical" H 7100 4850 50  0001 C CNN
F 3 "~" H 7100 4850 50  0001 C CNN
	1    7100 4850
	-1   0    0    -1  
$EndComp
$Comp
L power:GND #PWR028
U 1 1 61867772
P 6900 5050
F 0 "#PWR028" H 6900 4800 50  0001 C CNN
F 1 "GND" H 6905 4877 50  0000 C CNN
F 2 "" H 6900 5050 50  0001 C CNN
F 3 "" H 6900 5050 50  0001 C CNN
	1    6900 5050
	1    0    0    -1  
$EndComp
$Comp
L power:VCC #PWR026
U 1 1 618681C7
P 6900 4750
F 0 "#PWR026" H 6900 4600 50  0001 C CNN
F 1 "VCC" H 6900 4950 50  0000 C CNN
F 2 "" H 6900 4750 50  0001 C CNN
F 3 "" H 6900 4750 50  0001 C CNN
	1    6900 4750
	1    0    0    -1  
$EndComp
Text GLabel 6900 4850 0    50   Input ~ 0
SDA
Text GLabel 6900 4950 0    50   Input ~ 0
SCL
Text Notes 675  2025 0    50   ~ 0
Note: ver 0.2 had a pot divider on Vout_sense which is not necessary.\nIf using ver 0.2 pcb, Replace resistor with 0R
Text Notes 5650 5875 0    63   ~ 13
Accepts both versions of ADS115 modules commonly available on AliExpress.\nThe larger 'Blue' module, or the slimmer 'Purple' module.\nInternal ADC on ESP32 may also be used, but is not recommended.
$EndSCHEMATC
